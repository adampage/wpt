<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Name Comp: Hidden Not Referenced</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/resources/testdriver.js"></script>
  <script src="/resources/testdriver-vendor.js"></script>
  <script src="/resources/testdriver-actions.js"></script>
  <script src="/wai-aria/scripts/aria-utils.js"></script>
</head>
<body>

<p>Tests the <a href="https://w3c.github.io/accname/#comp_hidden_not_referenced">#comp_hidden_not_referenced</a> portions of the AccName <em>Name Computation</em> algorithm.</p>

<button
  class="ex"
  data-expectedlabel="visible to all users"
  data-testname="button containing an unreferenced element that is aria-hidden=true, an unreferenced element with the hidden host language attribute, and an unreferenced element with full exposure"
>
  <span aria-hidden="true">hidden,</span>
  <span hidden>hidden from all users,</span>
  <span>visible to all users</span>
</button>

<button
  class="ex"
  data-expectedlabel="hidden but referenced,"
  data-testname="button labelled by element that is aria-hidden=true"
  aria-labelledby="button-label-2"
>
  <span aria-hidden="true" id="button-label-2">hidden but referenced,</span>
  <span hidden>hidden from all users,</span>
  <span>visible to all users</span>
</button>

<button
  class="ex"
  data-expectedlabel="hidden from all users but referenced,"
  data-testname="button labelled by element with the hidden host language attribute"
  aria-labelledby="button-label-3"
>
  <span aria-hidden="true">hidden,</span>
  <span hidden id="button-label-3">hidden from all users but referenced,</span>
  <span>visible to all users</span>
</button>

<button
  class="ex"
  data-expectedlabel="un-hidden and referenced indirectly,"
  data-testname="button labelled by an element that is aria-hidden=true which contains a nested child that is aria-hidden=false"
  aria-labelledby="button-label-4"
>
  <span aria-hidden="true">hidden,</span>
  <span aria-hidden="true" id="button-label-4">
    <span aria-hidden="false" id="button-label-4-child">un-hidden and referenced indirectly,</span>
  </span>
  <span hidden>hidden from all users,</span>
  <span>visible to all users</span>
</button>

<button
  class="ex"
  data-expectedlabel="un-hidden and referenced directly,"
  data-testname="button labelled by an element that is aria-hidden=false which belongs to a parent that is aria-hidden=true"
  aria-labelledby="button-label-5-child"
>
  <span aria-hidden="true">hidden,</span>
  <span aria-hidden="true" id="button-label-5">
    <span aria-hidden="false" id="button-label-5-child">un-hidden and referenced directly,</span>
  </span>
  <span hidden>hidden from all users,</span>
  <span>visible to all users</span>
</button>

<a
  class="ex"
  data-testname="link labelled by elements with assorted visibility and a11y tree exposure"
  data-expectedlabel="visible to all users, hidden but referenced, hidden from all users but referenced"
  href="#"
  aria-labelledby="link-label-1a link-label-1b link-label-1c"
>
  <span id="link-label-1a">
    <span>visible to all users,</span>
    <span aria-hidden="true">hidden,</span>
  </span>
  <span aria-hidden="true" id="link-label-1b">hidden but referenced,</span>
  <span hidden id="link-label-1c">hidden from all users but referenced</span>
</a>

<h2
  class="ex"
  data-testname="heading with name from content, containing rendered content that is aria-hidden=true with nested, rendered content that is aria-hidden=false"
  data-expectedlabel="visible to all users, un-hidden"
>
  visible to all users,
  <span aria-hidden="true">
    hidden,
    <span aria-hidden="false">un-hidden</span>
  </span>
</h2>

<h2
  class="ex"
  data-testname="heading with name from content, containing element that is visibility:hidden with nested content that is visibility:visible"
  data-expectedlabel="visible to all users, un-hidden for all users"
>
  visible to all users,
  <span style="visibility: hidden;">
    hidden from all users,
    <span style="visibility: visible;">un-hidden for all users</span>
  </span>
</h2>

<h2
  class="ex"
  data-testname="heading with name from content, containing element with the hidden host language attribute with nested content that is aria-hidden=false"
  data-expectedlabel="visible to all users,"
>
  visible to all users,
  <span hidden>
    hidden from all users,
    <span aria-hidden="false">un-hidden</span>
  </span>
</h2>

<script>
AriaUtils.verifyLabelsBySelector(".ex");
</script>
</body>
</html>
